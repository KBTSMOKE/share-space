<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>å…±äº«ç©ºé—´</title>
    <style>
        /* ä¿ç•™ä½ åŸæ¥çš„æ ·å¼ */
        body { font-family: Arial; margin: 0; padding: 20px; background: #f5f5f5; }
        .container { max-width: 1200px; margin: auto; display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .section { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        @media (max-width: 768px) { .container { grid-template-columns: 1fr; } }
        .photo-item img { width: 100%; height: 150px; object-fit: cover; border-radius: 5px; }
        .todo-item { display: flex; align-items: center; gap: 10px; padding: 5px 0; }
        .todo-item.completed { text-decoration: line-through; opacity: 0.6; }
        body {
    margin: 0;
    font-family: "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: linear-gradient(135deg,#667eea 0%, #764ba2 100%);
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
}
.section {
    background: rgba(255,255,255,.25);
    backdrop-filter: blur(10px);
    border-radius: 20px;
    border: 1px solid rgba(255,255,255,.18);
    box-shadow: 0 8px 32px rgba(31,38,135,.37);
    padding: 30px;
    margin-bottom: 25px;
}
h2 { color:#fff; margin-top:0; }

        /*æŒ‰é’®æ¢è‰²*/
        button {
    background: linear-gradient(45deg,#ff6b6b,#ff8e8e);
    border: none;
    color: #fff;
    padding: 10px 22px;
    border-radius: 50px;
    cursor: pointer;
    transition: transform .2s;
}
button:hover { transform: scale(1.05); }

        /*ç…§ç‰‡å¢™æ¢è‰²*/
        .photo-gallery {
    column-count: 3;
    column-gap: 10px;
}
.photo-item {
    break-inside: avoid;
    margin-bottom: 10px;
}
@media (max-width:768px){ .photo-gallery{ column-count:2; } }

        /*æ–‡æœ¬æ¡†*/
        input[type=text], textarea {
    width: 100%;
    border: none;
    border-radius: 10px;
    padding: 10px 15px;
    outline: none;
    box-shadow: inset 0 0 0 1px rgba(0,0,0,.1);
    font-family: inherit;
    resize: vertical;
}
    </style>
</head>
<body>
    <div class="container">
        <div class="section">
            <h2>ğŸ“¸ å…±äº«ç…§ç‰‡å¢™</h2>
            <input type="file" id="photoInput" accept="image/*" style="display:none" multiple>
            <button onclick="photoInput.click()">ä¸Šä¼ ç…§ç‰‡</button>
            <div id="photoGallery" style="display:grid; grid-template-columns: repeat(auto-fill,minmax(150px,1fr)); gap:10px; margin-top:15px;"></div>
        </div>

        <div class="section">
            <h2>ğŸ“ å…±äº«æ—¥è®°</h2>
            <textarea id="diaryContent" placeholder="å†™ä¸‹ä»Šå¤©çš„å¿ƒæƒ…..." rows="4" style="width:100%"></textarea>
            <button onclick="saveDiary()">å‘å¸ƒæ—¥è®°</button>
            <div id="diaryList" style="margin-top:15px;"></div>
        </div>

        <div class="section">
            <h2>âœ… å…±äº«å¾…åŠ</h2>
            <input type="text" id="todoInput" placeholder="æ·»åŠ å¾…åŠäº‹é¡¹..." style="width:70%; padding:5px">
            <button onclick="addTodo()">æ·»åŠ </button>
            <div id="todoList"></div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

    <script>
        // ğŸ”§ æŠŠè¿™é‡Œæ”¹æˆä½ çš„æ•°æ®åº“URL
        const firebaseConfig = {
            databaseURL: "https://YOUR-PROJECT-ID-default-rtdb.asia-southeast1.firebasedatabase.app/"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // å®æ—¶ç›‘å¬ç…§ç‰‡
        db.ref("photos").on("value", snap => {
            const gallery = document.getElementById("photoGallery");
            gallery.innerHTML = "";
            snap.forEach(child => {
                const p = child.val();
                gallery.innerHTML += `<div class="photo-item">
                    <img src="${p.src}">
                    <button onclick="deletePhoto('${child.key}')">Ã—</button>
                </div>`;
            });
        });

        // å®æ—¶ç›‘å¬æ—¥è®°
        db.ref("diaries").on("value", snap => {
            const list = document.getElementById("diaryList");
            list.innerHTML = "";
            snap.forEach(child => {
                const d = child.val();
                list.innerHTML += `<div style="border-left:3px solid #667eea; padding:8px; margin:5px 0;">
                    <small>${d.date}</small><br>${d.content}
                </div>`;
            });
        });

        // å®æ—¶ç›‘å¬å¾…åŠ
        db.ref("todos").on("value", snap => {
            const list = document.getElementById("todoList");
            list.innerHTML = "";
            snap.forEach(child => {
                const t = child.val();
                list.innerHTML += `<div class="todo-item ${t.completed?'completed':''}">
                    <input type="checkbox" ${t.completed?'checked':''} onchange="toggleTodo('${child.key}', this.checked)">
                    ${t.text}
                    <button onclick="deleteTodo('${child.key}')">Ã—</button>
                </div>`;
            });
        });

        // ä¸Šä¼ ç…§ç‰‡
        function handlePhoto(e) {
            for (let file of e.target.files) {
                const reader = new FileReader();
                reader.onload = ev => {
                    db.ref("photos").push({ src: ev.target.result });
                };
                reader.readAsDataURL(file);
            }
        }
        document.getElementById("photoInput").addEventListener("change", handlePhoto);
        function deletePhoto(id) { db.ref("photos").child(id).remove(); }

        // å‘å¸ƒæ—¥è®°
        function saveDiary() {
            const txt = document.getElementById("diaryContent").value.trim();
            if (!txt) return alert("å†™ç‚¹ä»€ä¹ˆå§");
            db.ref("diaries").push({ content: txt, date: new Date().toLocaleString("zh-CN") });
            document.getElementById("diaryContent").value = "";
        }

        // æ·»åŠ å¾…åŠ
        function addTodo() {
            const txt = document.getElementById("todoInput").value.trim();
            if (!txt) return alert("è¾“å…¥å†…å®¹");
            db.ref("todos").push({ text: txt, completed: false });
            document.getElementById("todoInput").value = "";
        }
        function toggleTodo(id, completed) {
            db.ref("todos").child(id).update({ completed });
        }
        function deleteTodo(id) {
            db.ref("todos").child(id).remove();
        }
    </script>
</body>
</html>

